spring:
  application:
    name: finguard
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:finguard}
    username: ${DB_USER:finguard}
    password: ${DB_PASSWORD:finguard}
  jpa:
    hibernate:
      ddl-auto: none
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        jdbc:
          time_zone: UTC
    show-sql: false
    open-in-view: false
  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      probes:
        enabled: true

app:
  frontend:
    base-url: ${APP_FRONTEND_BASE_URL:http://localhost:8080}
  mail:
    enabled: ${MAIL_ENABLED:false}
    from: ${MAIL_FROM:no-reply@finguard.local}
    reset-subject: ${MAIL_RESET_SUBJECT:Сброс пароля FinGuard}
    otp-subject: ${MAIL_OTP_SUBJECT:Код входа FinGuard}
  security:
    jwt:
      secret: ${JWT_SECRET:Q29kZXhEZW1vMTIzNDU2Nzg5MDEyMzQ1Njc4OTAxMjM0NTY3ODkwMTIzNDU2Nzg5MA==}
      expiration-seconds: ${JWT_EXPIRATION:3600}
      refresh-expiration-seconds: ${JWT_REFRESH_EXPIRATION:604800}
      issuer: ${JWT_ISSUER:finguard}
      audience: ${JWT_AUDIENCE:finguard-app}
      require-env-secret: ${JWT_REQUIRE_ENV_SECRET:false}
      cookie-secure: ${JWT_COOKIE_SECURE:false}
    otp:
      enabled: ${OTP_ENABLED:true}
      dev-code: ${OTP_DEV_CODE:654321}
      ttl-seconds: ${OTP_TTL_SECONDS:300}
    cors:
      allowed-origins: ${ALLOWED_ORIGINS:}
    rate-limit:
      auth:
        limit: ${RATE_LIMIT_AUTH_LIMIT:30}
        window-ms: ${RATE_LIMIT_AUTH_WINDOW_MS:60000}
      forgot:
        limit: ${RATE_LIMIT_FORGOT_LIMIT:5}
        window-ms: ${RATE_LIMIT_FORGOT_WINDOW_MS:300000}
      reset-confirm:
        limit: ${RATE_LIMIT_RESET_CONFIRM_LIMIT:5}
        window-ms: ${RATE_LIMIT_RESET_CONFIRM_WINDOW_MS:300000}
      reset:
        limit: ${RATE_LIMIT_RESET_LIMIT:5}
        window-ms: ${RATE_LIMIT_RESET_WINDOW_MS:300000}
    tokens:
      reset-dev-code: ${RESET_DEV_CODE:123456}
      reset-cooldown-seconds: ${RESET_COOLDOWN_SECONDS:60}
      reset-session-ttl-minutes: ${RESET_SESSION_TTL_MINUTES:15}
